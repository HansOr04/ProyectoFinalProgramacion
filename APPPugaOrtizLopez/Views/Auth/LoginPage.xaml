<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
            xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
            xmlns:viewmodels="clr-namespace:APPPugaOrtizLopez.ViewModels"
            x:Class="APPPugaOrtizLopez.Views.Auth.LoginPage"
            Title="Iniciar Sesión">

    <ContentPage.BindingContext>
        <viewmodels:LoginViewModel/>
    </ContentPage.BindingContext>

    <Grid RowDefinitions="Auto,*" Margin="20">
        <VerticalStackLayout Grid.Row="1" Spacing="20" VerticalOptions="Center">
            <Image Source="logo.png"
                  HeightRequest="150"
                  Aspect="AspectFit" 
                  Margin="0,0,0,30"/>

            <Entry Placeholder="Email"
                  Text="{Binding Email}"
                  Keyboard="Email"/>

            <Entry Placeholder="Contraseña" 
                  Text="{Binding Password}"
                  IsPassword="True"/>

            <Label Text="{Binding ErrorMessage}"
                  TextColor="Red"
                  IsVisible="{Binding ErrorMessage, Converter={StaticResource StringNotEmptyConverter}}"/>

            <Button Text="Iniciar Sesión"
                   Command="{Binding LoginCommand}"
                   IsEnabled="{Binding IsLoading, Converter={StaticResource InverseBoolConverter}}"
                   Margin="0,20"/>

            <ActivityIndicator IsRunning="{Binding IsLoading}"
                            IsVisible="{Binding IsLoading}"
                            HorizontalOptions="Center"/>

            <Label Text="¿No tienes una cuenta?"
                  HorizontalOptions="Center"/>

            <Button Text="Registrarse"
                   Command="{Binding NavigateToRegisterCommand}"
                   Style="{StaticResource TextButton}"/>
        </VerticalStackLayout>
    </Grid>
</ContentPage>